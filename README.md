# ğŸ¢ Fanshawe Navigator - AI Campus Navigation System

A sophisticated **Multimodal RAG (Retrieval-Augmented Generation)** system that provides intelligent navigation assistance for Fanshawe College campus. This AI-powered application combines visual understanding, interactive maps, natural language processing, and web scraping to deliver precise, context-aware campus information with real-time map visualization.

## ğŸ¯ Project Overview

This system leverages **Google's Gemini AI models**, **Vertex AI**, **Leaflet.js mapping**, and **Playwright web scraping** to create an intelligent campus assistant that can:

- ğŸ“ **Interactive Map Navigation**: Visual route display on real campus floor plans with clickable rooms
- ğŸ—ºï¸ **Dual Navigation Modes**: Chat-to-Map and Map-to-Chat interaction
- ğŸ¤– **AI-Powered Responses**: Use multimodal AI to understand both text queries and visual context
- ğŸ” **Smart Search**: Find relevant information using advanced embedding-based similarity search
- ğŸ“± **Web Interface**: Clean, responsive chat interface with integrated mapping
- ğŸ”„ **Auto-Updates**: Automatically processes new images and updates embeddings
- ğŸ“ **Precise Positioning**: Accurate room center calculations with manual override capability
- ğŸ“¢ **D2L Integration**: Scrapes and displays course announcements from Brightspace
- ğŸ½ï¸ **Campus Services**: Information about events, restaurants, and campus facilities
- ğŸ¯ **Intent Classification**: Intelligent routing of queries to appropriate handlers

## ğŸ“Š System Diagrams

### **1. Functional Diagram - User Interaction Flow**

This diagram shows how users interact with the system and what responses they receive:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER INTERACTION FLOW                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    USER                    SYSTEM                         OUTPUT
     â”‚                        â”‚                              â”‚
     â”œâ”€ "Navigate to 1003"   â”‚                              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Intent: NAVIGATION           â”‚
     â”‚                        â”‚ Parse: Room 1003             â”‚
     â”‚                        â”‚ Find: Path M1_6 â†’ M1_8      â”‚
     â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ Map: Show route + markers    â”‚
     â”‚ AI Response + Map      â”‚ Chat: Walking directions     â”‚
     â”‚                        â”‚                              â”‚
     â”œâ”€ "Campus events today" â”‚                             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Intent: EVENTS               â”‚
     â”‚                        â”‚ Query: campus_events.json    â”‚
     â”‚                        â”‚ Filter: Today's date         â”‚
     â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ Chat: Event list (formatted) â”‚
     â”‚ Event List             â”‚                              â”‚
     â”‚                        â”‚                              â”‚
     â”œâ”€ "Where to eat lunch?" â”‚                             â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Intent: RESTAURANTS          â”‚
     â”‚                        â”‚ Query: restaurants.json      â”‚
     â”‚                        â”‚ AI: Generate recommendations â”‚
     â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ Chat: Restaurant options     â”‚
     â”‚ Restaurant Info        â”‚                              â”‚
     â”‚                        â”‚                              â”‚
     â”œâ”€ "D2L announcements"  â”‚                              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Intent: ANNOUNCEMENTS        â”‚
     â”‚                        â”‚ Query: d2l_announcements.jsonâ”‚
     â”‚                        â”‚ AI: Format & summarize       â”‚
     â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ Chat: Announcement list      â”‚
     â”‚ Announcements          â”‚                              â”‚
     â”‚                        â”‚                              â”‚
     â”œâ”€ Click Room_1003      â”‚                              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Mode: Navigation              â”‚
     â”‚                        â”‚ Place: Green marker          â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ Status: "Select destination" â”‚
     â”‚                        â”‚                              â”‚
     â”œâ”€ Click Room_1018      â”‚                              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Calculate: Shortest path     â”‚
     â”‚                        â”‚ Display: Route visualization â”‚
     â”‚                        â”‚ Generate: AI directions      â”‚
     â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ Map: Path + markers          â”‚
     â”‚ Route + Directions     â”‚ Chat: Step-by-step guide     â”‚
```

---

### **2. Logical Diagram - Data Flow & Processing**

This diagram illustrates how data flows through different processing layers:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LOGICAL DATA FLOW ARCHITECTURE                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 1: INPUT PROCESSING                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  User Input          â”‚
                    â”‚  â€¢ Text query        â”‚
                    â”‚  â€¢ Map clicks        â”‚
                    â”‚  â€¢ Room selection    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 2: INTENT CLASSIFICATION                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Keyword Analysis    â”‚
                    â”‚  (Fast pre-filter)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Gemini AI           â”‚
                    â”‚  Intent Classifier   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼          â–¼           â–¼           â–¼           â–¼
   NAVIGATION   EVENTS    RESTAURANTS  ANNOUNCEMENTS  OUT_OF_SCOPE
        â”‚          â”‚           â”‚           â”‚           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 3: DATA RETRIEVAL                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚          â”‚           â”‚           â”‚           â”‚
        â–¼          â–¼           â–¼           â–¼           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Room   â”‚  â”‚ Events  â”‚ â”‚Restaurantâ”‚ â”‚  D2L     â”‚ â”‚Gemini  â”‚
   â”‚Resolverâ”‚  â”‚ JSON DB â”‚ â”‚  JSON DB â”‚ â”‚  Scraper â”‚ â”‚Fallbackâ”‚
   â”‚        â”‚  â”‚         â”‚ â”‚          â”‚ â”‚  Cache   â”‚ â”‚        â”‚
   â”‚â€¢ Alias â”‚  â”‚â€¢ Filter â”‚ â”‚â€¢ Query   â”‚ â”‚â€¢ Refresh â”‚ â”‚â€¢ RAG   â”‚
   â”‚â€¢ Node  â”‚  â”‚â€¢ Sort   â”‚ â”‚â€¢ Match   â”‚ â”‚â€¢ Parse   â”‚ â”‚Search  â”‚
   â”‚  Map   â”‚  â”‚â€¢ Format â”‚ â”‚â€¢ Rank    â”‚ â”‚â€¢ Format  â”‚ â”‚        â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚          â”‚           â”‚           â”‚           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 4: AI PROCESSING                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚          â”‚           â”‚           â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  RAG Image Search    â”‚
                    â”‚  â€¢ Text embeddings   â”‚
                    â”‚  â€¢ Image embeddings  â”‚
                    â”‚  â€¢ Cosine similarity â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Gemini 2.5 Pro      â”‚
                    â”‚  â€¢ Context assembly  â”‚
                    â”‚  â€¢ Response gen      â”‚
                    â”‚  â€¢ Markdown format   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 5: MAP PROCESSING (if navigation)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Navigation Graph    â”‚
                    â”‚  â€¢ Load SVG nodes    â”‚
                    â”‚  â€¢ Build adjacency   â”‚
                    â”‚  â€¢ Room centers      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Dijkstra Algorithm  â”‚
                    â”‚  â€¢ Shortest path     â”‚
                    â”‚  â€¢ Distance calc     â”‚
                    â”‚  â€¢ Node sequence     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Coordinate Transformâ”‚
                    â”‚  â€¢ SVG â†’ Normalized  â”‚
                    â”‚  â€¢ â†’ Geographic      â”‚
                    â”‚  â€¢ â†’ Rotated (21.3Â°) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 6: OUTPUT ASSEMBLY                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Response Builder    â”‚
                    â”‚  â€¢ HTML formatting   â”‚
                    â”‚  â€¢ Map actions       â”‚
                    â”‚  â€¢ Marker coords     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  JSON Response       â”‚
                    â”‚  {                   â”‚
                    â”‚    reply: "...",     â”‚
                    â”‚    mapAction: {...}  â”‚
                    â”‚  }                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Frontend Rendering  â”‚
                    â”‚  â€¢ Display chat      â”‚
                    â”‚  â€¢ Draw route        â”‚
                    â”‚  â€¢ Place markers     â”‚
                    â”‚  â€¢ Auto-zoom map     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **3. Architectural Diagram - Component Structure**

This diagram shows the physical organization of system components:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COMPONENT ARCHITECTURE                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND LAYER (Browser)                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Chat UI           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Map Controller                  â”‚  â”‚
â”‚  â”‚  (static/          â”‚  Events â”‚  (static/map-controller.js)      â”‚  â”‚
â”‚  â”‚   script.js)       â”‚         â”‚                                  â”‚  â”‚
â”‚  â”‚                    â”‚         â”‚  â€¢ Leaflet.js (interactive map)  â”‚  â”‚
â”‚  â”‚  â€¢ Message input   â”‚         â”‚  â€¢ SVG overlay (floor plans)     â”‚  â”‚
â”‚  â”‚  â€¢ Response displayâ”‚         â”‚  â€¢ Navigation graph builder      â”‚  â”‚
â”‚  â”‚  â€¢ HTML rendering  â”‚         â”‚  â€¢ Dijkstra pathfinding          â”‚  â”‚
â”‚  â”‚  â€¢ Map interaction â”‚         â”‚  â€¢ Coordinate transformation     â”‚  â”‚
â”‚  â”‚    triggers        â”‚         â”‚  â€¢ Room click handlers           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â€¢ Marker placement              â”‚  â”‚
â”‚           â”‚                     â”‚  â€¢ Route visualization           â”‚  â”‚
â”‚           â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                              â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                              â”‚
            â”‚         HTTP/REST            â”‚
            â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ APPLICATION LAYER (Flask Server - main.py)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Route Handlers                                                   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  /chat              â”‚ Main chatbot endpoint (intent classifier) â”‚  â”‚
â”‚  â”‚  /api/navigation/*  â”‚ Navigation API (parse, rooms, centers)    â”‚  â”‚
â”‚  â”‚  /api/announcements*â”‚ D2L announcement management               â”‚  â”‚
â”‚  â”‚  /images/*          â”‚ Image embedding management                â”‚  â”‚
â”‚  â”‚  /system/status     â”‚ System health & diagnostics               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                              â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Intent Router   â”‚          â”‚ Response Assembler â”‚                  â”‚
â”‚  â”‚ â€¢ Keyword match â”‚          â”‚ â€¢ HTML formatting  â”‚                  â”‚
â”‚  â”‚ â€¢ Gemini classifyâ”‚         â”‚ â€¢ Map actions      â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚           â”‚                              â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Query Handlers                                  â”‚                   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â”‚  â”‚ â€¢ handle_navigation_query()                     â”‚                   â”‚
â”‚  â”‚ â€¢ handle_event_query()                          â”‚                   â”‚
â”‚  â”‚ â€¢ handle_restaurant_query()                     â”‚                   â”‚
â”‚  â”‚ â€¢ handle_announcement_query()                   â”‚                   â”‚
â”‚  â”‚ â€¢ handle_out_of_scope_query()                   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                              â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                              â”‚
            â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SERVICE LAYER (src/services/)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ D2L Scraper          â”‚      â”‚ Advanced Image Manager         â”‚     â”‚
â”‚  â”‚ (d2l_scraper.py)     â”‚      â”‚ (main.py)                      â”‚     â”‚
â”‚  â”‚                      â”‚      â”‚                                â”‚     â”‚
â”‚  â”‚ â€¢ Playwright browser â”‚      â”‚ â€¢ Embedding generation         â”‚     â”‚
â”‚  â”‚ â€¢ Microsoft SSO auth â”‚      â”‚ â€¢ Auto file monitoring         â”‚     â”‚
â”‚  â”‚ â€¢ 2FA handling       â”‚      â”‚ â€¢ Cache management (pickle)    â”‚     â”‚
â”‚  â”‚ â€¢ Course navigation  â”‚      â”‚ â€¢ Image similarity search      â”‚     â”‚
â”‚  â”‚ â€¢ Event extraction   â”‚      â”‚ â€¢ Watchdog integration         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                              â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Announcement    â”‚          â”‚ Room Resolver       â”‚                  â”‚
â”‚  â”‚ Transformer     â”‚          â”‚ â€¢ Alias lookup      â”‚                  â”‚
â”‚  â”‚ â€¢ Raw â†’ JSON    â”‚          â”‚ â€¢ roomToNode map    â”‚                  â”‚
â”‚  â”‚ â€¢ Formatting    â”‚          â”‚ â€¢ Coordinate calc   â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI/ML LAYER                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Google Gemini Models (src/models/gemini_models.py)             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ gemini-2.5-pro (latest)    â†’ Intent classification          â”‚   â”‚
â”‚  â”‚  â€¢ gemini-2.0-flash           â†’ Fast responses                 â”‚   â”‚
â”‚  â”‚  â€¢ Multimodal understanding   â†’ Image + text analysis          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Vertex AI Embeddings (src/models/embedding_models.py)          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ textembedding-gecko        â†’ Text vectorization             â”‚   â”‚
â”‚  â”‚  â€¢ multimodalembedding        â†’ Image vectorization            â”‚   â”‚
â”‚  â”‚  â€¢ Sentence Transformer       â†’ Semantic search                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ RAG System (multimodal_rag_complete.py)                        â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ Image processing pipeline                                   â”‚   â”‚
â”‚  â”‚  â€¢ Embedding generation & caching                              â”‚   â”‚
â”‚  â”‚  â€¢ Cosine similarity search                                    â”‚   â”‚
â”‚  â”‚  â€¢ Context retrieval & assembly                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DATA LAYER                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Configuration    â”‚  â”‚ JSON Databases   â”‚  â”‚ Cache Storage     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ building_m_      â”‚  â”‚ campus_events    â”‚  â”‚ image_metadata_   â”‚   â”‚
â”‚  â”‚  rooms.json      â”‚  â”‚  .json           â”‚  â”‚  cache.pkl        â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                   â”‚   â”‚
â”‚  â”‚ â€¢ Room aliases   â”‚  â”‚ campus_          â”‚  â”‚ â€¢ Embeddings      â”‚   â”‚
â”‚  â”‚ â€¢ Node mappings  â”‚  â”‚  restaurants     â”‚  â”‚ â€¢ Descriptions    â”‚   â”‚
â”‚  â”‚ â€¢ Coordinates    â”‚  â”‚  .json           â”‚  â”‚ â€¢ Metadata        â”‚   â”‚
â”‚  â”‚ â€¢ Descriptions   â”‚  â”‚                  â”‚  â”‚                   â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚ d2l_             â”‚  â”‚                   â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚  announcements   â”‚  â”‚                   â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚  .json           â”‚  â”‚                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Floor Plans      â”‚  â”‚ Navigation Data  â”‚  â”‚ Image Assets      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ M1_official.svg  â”‚  â”‚ floorPlansScript â”‚  â”‚ images/           â”‚   â”‚
â”‚  â”‚ M2.svg           â”‚  â”‚  .js             â”‚  â”‚  M1.jpeg          â”‚   â”‚
â”‚  â”‚ M3.svg           â”‚  â”‚                  â”‚  â”‚  M2.jpeg          â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚ â€¢ Graph nodes    â”‚  â”‚  M3.jpeg          â”‚   â”‚
â”‚  â”‚ campus.geojson   â”‚  â”‚ â€¢ Connections    â”‚  â”‚                   â”‚   â”‚
â”‚  â”‚                  â”‚  â”‚ â€¢ Distances      â”‚  â”‚ (for RAG search)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXTERNAL SERVICES                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Google Cloud         â”‚      â”‚ D2L/Brightspace                 â”‚    â”‚
â”‚  â”‚ â€¢ Gemini API         â”‚      â”‚ â€¢ fanshaweonline.ca             â”‚    â”‚
â”‚  â”‚ â€¢ Vertex AI          â”‚      â”‚ â€¢ Microsoft SSO                 â”‚    â”‚
â”‚  â”‚ â€¢ Embeddings API     â”‚      â”‚ â€¢ Course pages                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Data Flow Architecture**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA FLOW                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  USER INPUT                                                    OUTPUT
     â”‚                                                             â–²
     â”‚                                                             â”‚
     â–¼                                                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat UI â”‚â”€â”€â”€â”€â”€â–ºâ”‚ Flask Server â”‚â”€â”€â”€â”€â”€â–ºâ”‚ Gemini API â”‚â”€â”€â”€â”€â–ºâ”‚ Response â”‚
â”‚         â”‚      â”‚              â”‚      â”‚            â”‚     â”‚          â”‚
â”‚ Map     â”‚      â”‚ Parse Requestâ”‚      â”‚ Generate   â”‚     â”‚ â€¢ Text   â”‚
â”‚ Clicks  â”‚      â”‚              â”‚      â”‚ Response   â”‚     â”‚ â€¢ Route  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â€¢ Markersâ”‚
     â”‚                  â”‚                     â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                  â”‚                     â”‚                  â–²
     â”‚                  â–¼                     â”‚                  â”‚
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                  â”‚
     â”‚         â”‚ Room Resolution â”‚            â”‚                  â”‚
     â”‚         â”‚ â€¢ Aliases       â”‚            â”‚                  â”‚
     â”‚         â”‚ â€¢ Node mapping  â”‚            â”‚                  â”‚
     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚                  â”‚
     â”‚                  â”‚                     â”‚                  â”‚
     â”‚                  â–¼                     â”‚                  â”‚
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                  â”‚
     â”‚         â”‚ Image Context   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
     â”‚         â”‚ â€¢ RAG retrieval â”‚                               â”‚
     â”‚         â”‚ â€¢ Visual info   â”‚                               â”‚
     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
     â”‚                  â”‚                                        â”‚
     â”‚                  â–¼                                        â”‚
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
     â”‚         â”‚ Map Controller  â”‚                               â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ Path calc     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ â€¢ Coordinates   â”‚
               â”‚ â€¢ Visualization â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Key Features

### ğŸ—ºï¸ **Dual-Mode Interactive Navigation**

#### **Mode 1: Chat â†’ Map** (AI-Initiated Navigation)
```
User: "Navigate from Room 1003 to Room 1018"
  â†“
Gemini parses request â†’ Resolves room names â†’ Finds nodes
  â†“
System sends: { startNode: "M1_6", endNode: "M1_8" }
  â†“
Map displays route with markers at room centers
```

#### **Mode 2: Map â†’ Chat** (User-Initiated Navigation)
```
User clicks: "Start Navigation" button
  â†“
User clicks: Room_1003 on map â†’ Green marker at room center
  â†“
User clicks: Room_1018 on map â†’ Red marker at room center
  â†“
System calculates path â†’ Displays route â†’ Sends to chat
  â†“
AI generates walking directions based on visual path
```

### ğŸ“ **Coordinate System & Accuracy**

#### **Smart Coordinate Resolution**
- **Priority 1**: Manual room centers from `config/building_m_rooms.json`
- **Priority 2**: Automatic calculation from SVG polygon bounding box
- **Priority 3**: Corridor node position (navigation fallback)

#### **Coordinate Transformation Pipeline**
```
SVG Coordinates (pixels)
        â†“
Normalized (0-1 range)
        â†“
Geographic (Lat/Lng)
        â†“
Rotated (21.3Â° building alignment)
        â†“
Map Display Position
```

### ğŸ§  **Multimodal AI Processing**
- **Gemini 2.0 Flash**: Advanced multimodal understanding
- **Text Embeddings**: Semantic search capabilities
- **Image Embeddings**: Visual similarity matching
- **Contextual Analysis**: Combines visual and textual information

### ğŸ”„ **Intelligent Image Management**
- **Auto-Processing**: Automatically processes new images
- **Embedding Generation**: Creates vector representations for search
- **Cache System**: Efficient storage and retrieval
- **File Monitoring**: Real-time detection of new images

### ğŸ’¬ **Interactive Chat Interface**
- **Real-time Chat**: Instant responses to navigation queries
- **HTML Rendering**: Rich formatting for directions
- **Responsive Design**: Works on desktop and mobile
- **Error Handling**: Graceful error recovery

### ğŸ¯ **Navigation Intelligence**
- **Step-by-step Directions**: Detailed walking instructions
- **Room Identification**: Precise location descriptions
- **Context Awareness**: Uses building layout knowledge
- **Multi-modal Queries**: Understands both text and visual context

## ğŸ“‹ Prerequisites

Before setting up the project, ensure you have:

- **Python 3.11+** installed ([Download Python](https://www.python.org/downloads/))
- **Google Cloud Account** with Vertex AI enabled ([Sign up](https://cloud.google.com/))
- **Gemini API Key** from Google AI Studio ([Get API Key](https://aistudio.google.com/apikey))
- **Git** for version control ([Download Git](https://git-scm.com/downloads))
- **Modern web browser** (Chrome, Firefox, Edge, or Safari)
- **Text editor or IDE** (VS Code, PyCharm, or similar)

### **Optional (for D2L scraping)**
- **D2L/Brightspace account** with valid credentials
- **Playwright browsers** (auto-installed with setup)

## ğŸ› ï¸ Installation & Setup

### 1. **Clone the Repository**
```bash
git clone <repository-url>
cd Capstone_Project_AIM
```

### 2. **Create Virtual Environment**
```bash
# Create virtual environment
python -m venv .venv

# Activate virtual environment
# On Linux/Mac:
source .venv/bin/activate
# On Windows:
.venv\Scripts\activate
```

### 3. **Install Dependencies**
```bash
pip install -r requirements.txt
```

### 4. **Environment Configuration**

Create a `.env` file in the project root:

```bash
# Google AI/Gemini Configuration
GEMINI_API_KEY=your_gemini_api_key_here

# Google Cloud Configuration (for RAG system)
GOOGLE_CLOUD_PROJECT_ID=your_project_id_here
GOOGLE_APPLICATION_CREDENTIALS=path/to/your/service-account-key.json
```

### 5. **Google Cloud Setup**

#### Enable Required APIs:
```bash
gcloud services enable aiplatform.googleapis.com
gcloud services enable generativelanguage.googleapis.com
```

#### Authenticate:
```bash
gcloud auth application-default login
```

### 6. **Image Setup**

Place your building floor plan images in the `images/` directory:
```bash
images/
â”œâ”€â”€ M1.jpeg    # Main floor plan
â”œâ”€â”€ M2.jpeg    # Additional views
â””â”€â”€ M3.jpeg    # Detailed sections
```

## ğŸš€ Running the Complete Solution

This section provides step-by-step instructions to run the entire Fanshawe Navigator system.

---

### **Method 1: Quick Start (Recommended for First-Time Users)**

This is the easiest way to get everything running:

```bash
# Step 1: Navigate to project directory
cd /path/to/Capstone_Project_AIM

# Step 2: Activate virtual environment
source .venv/bin/activate              # Linux/Mac
# OR
.venv\Scripts\activate                 # Windows

# Step 3: Verify environment setup
python -c "import google.generativeai; print('âœ… Dependencies OK')"

# Step 4: Run the application
python main.py
```

**Expected Output:**
```
ğŸš€ Starting Fanshawe Navigator...
âœ… Environment variables loaded
âœ… RAG system initialized
âœ… Image embeddings loaded (3 images)
âœ… Configuration loaded
ğŸŒ Server running on http://localhost:8081
ğŸ“± Open your browser and navigate to http://localhost:8081
Press Ctrl+C to stop
```

**Access the Application:**
- Open your web browser
- Navigate to: **http://localhost:8081**
- You should see the chat interface with an integrated map

---

### **Method 2: Using the Development Script**

For repeated development sessions, use the convenience script:

```bash
# Step 1: Make the script executable (first time only)
chmod +x devserver.sh

# Step 2: Run the development server
./devserver.sh
```

This script automatically:
- Activates the virtual environment
- Checks for required dependencies
- Starts the Flask server with debug mode
- Displays startup information

---

### **Method 3: Docker Deployment**

For production or isolated environments:

```bash
# Step 1: Build the Docker image
docker-compose build

# Step 2: Start the container
docker-compose up

# Step 3: Access at http://localhost:8081
```

**To stop:**
```bash
docker-compose down
```

---

### **Method 4: Production Mode**

For deployment to a server:

```bash
# Step 1: Set production environment
export FLASK_ENV=production
export FLASK_DEBUG=0

# Step 2: Install production server (gunicorn)
pip install gunicorn

# Step 3: Run with gunicorn
gunicorn -w 4 -b 0.0.0.0:8081 main:app
```

**Explanation:**
- `-w 4`: Use 4 worker processes
- `-b 0.0.0.0:8081`: Bind to all interfaces on port 8081
- `main:app`: Application entry point

---

### **Verification Steps**

After starting the application, verify it's working correctly:

#### **1. Check System Status**
```bash
curl http://localhost:8081/system/status
```

**Expected Response:**
```json
{
  "status": "healthy",
  "rag_system": {
    "initialized": true,
    "total_images": 3,
    "cache_available": true
  },
  "gemini_api": "connected",
  "timestamp": "2025-11-20T12:00:00"
}
```

#### **2. Test Navigation API**
```bash
curl -X POST http://localhost:8081/api/navigation/parse \
  -H "Content-Type: application/json" \
  -d '{"message": "Navigate from Room 1003 to Room 1018"}'
```

#### **3. Test Chat Endpoint**
```bash
curl -X POST http://localhost:8081/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Where is the main office?"}'
```

#### **4. Check Image Status**
```bash
curl http://localhost:8081/images/status
```

---

### **Stopping the Application**

**For local development:**
- Press `Ctrl+C` in the terminal running the server

**For Docker:**
```bash
docker-compose down
```

**For background processes:**
```bash
# Find the process
ps aux | grep main.py

# Kill the process
kill <PID>
```

---

## ğŸ”§ Running Individual Components

This section explains how to run specific parts of the system independently for development or testing.

---

### **Component 1: D2L Scraper (Announcements)**

The D2L scraper extracts course announcements from Brightspace/D2L.

#### **Setup D2L Credentials**

First, add your credentials to `.env`:
```bash
D2L_USERNAME=your_email@fanshaweonline.ca
D2L_PASSWORD=your_password
```

#### **Run the Scraper**

```bash
# Step 1: Activate virtual environment
source .venv/bin/activate

# Step 2: Install Playwright browsers (first time only)
python -m playwright install firefox

# Step 3: Run the scraper
python extract_all_announcements.py
```

**Expected Behavior:**
1. Opens Firefox browser (visible, not headless)
2. Navigates to D2L login page
3. Prompts for Microsoft SSO authentication
4. **If 2FA is required**: Displays verification code in terminal
5. Navigates to course pages
6. Extracts announcements from multiple courses
7. Saves to `all_announcements.json`

**Output File Structure:**
```json
[
  {
    "course": "Course Name",
    "title": "Announcement Title",
    "content": "Full announcement text...",
    "date": "2025-11-20",
    "url": "https://..."
  }
]
```

#### **Transform Announcements**

Convert raw scraper output to processed format:

```bash
# This runs automatically via API, but you can test manually:
python src/services/announcement_transformer.py
```

**Or via API:**
```bash
curl -X POST http://localhost:8081/api/announcements/refresh
```

---

### **Component 2: RAG System (Image Embeddings)**

The RAG system processes floor plan images and creates searchable embeddings.

#### **Update Image Embeddings**

```bash
# Step 1: Activate virtual environment
source .venv/bin/activate

# Step 2: Run the embedding update script
python update_embeddings.py
```

**What this does:**
- Scans `images/` folder for floor plan images
- Generates image embeddings using Vertex AI
- Creates text descriptions using Gemini Vision
- Generates text embeddings for descriptions
- Caches everything to `image_metadata_cache.pkl`

**Expected Output:**
```
ğŸš€ EMBEDDING UPDATE SCRIPT
==================================================
ğŸ“¦ Importing RAG system...
âœ… Multimodal RAG system available
ğŸ”„ Initializing RAG models...
âœ… Embedding models loaded

ğŸ“Š INITIAL STATUS:
- Initialized: True
- Total Images: 3
- RAG Available: True

ğŸ”„ METHOD 1: Direct Update
Processing images...
  âœ… M1.jpeg
  âœ… M2.jpeg
  âœ… M3.jpeg
âœ… Direct update successful

ğŸ‰ SCRIPT COMPLETED SUCCESSFULLY!
```

#### **Clear Image Cache**

```bash
# Via API
curl -X POST http://localhost:8081/images/clear-cache

# Via Python
python -c "from main import image_manager; image_manager.clear_cache()"
```

#### **Monitor Images (Auto-Update)**

Enable automatic embedding updates when images change:

```bash
# Start auto-monitoring (via API while server is running)
curl -X POST http://localhost:8081/images/auto-monitor/start

# Check status
curl http://localhost:8081/images/auto-monitor/status

# Stop monitoring
curl -X POST http://localhost:8081/images/auto-monitor/stop
```

---

### **Component 3: Navigation System**

Test the navigation and pathfinding system independently.

#### **Test Room Resolution**

```bash
python -c "
from main import resolve_room_name
print(resolve_room_name('1003'))       # Should return 'Room_1003'
print(resolve_room_name('bathroom men'))  # Should return 'Bathroom-Men'
"
```

#### **Test Navigation Parsing**

```bash
python << 'EOF'
from main import parse_navigation_request

result = parse_navigation_request('Navigate from Room 1003 to Room 1018')
print(f"Is Navigation: {result['is_navigation']}")
print(f"Start: {result['start']} â†’ Node: {result['startNode']}")
print(f"End: {result['end']} â†’ Node: {result['endNode']}")
EOF
```

#### **Test Map API Endpoints**

```bash
# Get all rooms
curl http://localhost:8081/api/navigation/rooms

# Get room centers (manual overrides)
curl http://localhost:8081/api/navigation/room-centers

# Parse navigation request
curl -X POST http://localhost:8081/api/navigation/parse \
  -H "Content-Type: application/json" \
  -d '{
    "message": "How do I get to the main office from room 1003?"
  }'

# Navigation from map clicks
curl -X POST http://localhost:8081/api/navigation/from-clicks \
  -H "Content-Type: application/json" \
  -d '{
    "startRoom": "Room_1003",
    "endRoom": "Room_1018"
  }'
```

---

### **Component 4: Gemini AI Integration**

Test the Gemini AI models independently.

#### **Test Intent Classification**

```bash
python << 'EOF'
import google.generativeai as genai
import os
from dotenv import load_dotenv

load_dotenv()
genai.configure(api_key=os.getenv("GEMINI_API_KEY"))

model = genai.GenerativeModel('gemini-2.5-pro')

queries = [
    "Navigate to room 1003",
    "What events are happening today?",
    "Where can I eat lunch?",
    "Show me D2L announcements"
]

for query in queries:
    response = model.generate_content(f"Classify this query intent: {query}")
    print(f"Query: {query}")
    print(f"Intent: {response.text}\n")
EOF
```

#### **Test Image Understanding**

```bash
python << 'EOF'
import google.generativeai as genai
import os
from dotenv import load_dotenv
from PIL import Image

load_dotenv()
genai.configure(api_key=os.getenv("GEMINI_API_KEY"))

model = genai.GenerativeModel('gemini-2.0-flash')
image = Image.open('images/M1.jpeg')

response = model.generate_content([
    "Describe this floor plan in detail. Identify rooms, corridors, and landmarks.",
    image
])

print(response.text)
EOF
```

---

### **Component 5: Map Visualization**

The map component runs entirely in the browser, but you can test it independently.

#### **Open Map Testing Tool**

```bash
# Start a simple HTTP server
python -m http.server 8000

# Navigate to:
# http://localhost:8000/tools/find_room_centers.html
```

This tool allows you to:
- Click on rooms to see their SVG coordinates
- Visualize room centers
- Test coordinate transformations
- Export room center configurations

#### **Test Map Controller (Browser Console)**

Open the application at `http://localhost:8081` and open browser DevTools (F12):

```javascript
// Check navigation state
console.log(navigationState);

// Check graph data
console.log(currentGraphData);

// Test coordinate conversion
const testCoords = svgCoordsToLatLng(250, 600, currentSvgMap, currentCorners);
console.log('Converted coordinates:', testCoords);

// Find shortest path
const path = findShortestPath(currentGraphData.graph, "M1_6", "M1_8");
console.log('Path:', path);

// Get room center
const center = getRoomCenterFromSVG("Room_1003", currentSvgMap, currentCorners);
console.log('Room center:', center);
```

---

### **Component 6: Event and Restaurant Queries**

Test the JSON database query system.

#### **Query Events**

```bash
python << 'EOF'
import json
from datetime import datetime

# Load events database
with open('data/campus_events.json', 'r') as f:
    events = json.load(f)

# Filter today's events
today = datetime.now().strftime('%Y-%m-%d')
today_events = [e for e in events if e.get('date') == today]

print(f"Events today ({today}):")
for event in today_events:
    print(f"  - {event['name']} at {event['time']} in {event['location']}")
EOF
```

#### **Query Restaurants**

```bash
python << 'EOF'
import json

# Load restaurants database
with open('data/campus_restaurants.json', 'r') as f:
    restaurants = json.load(f)

print("Campus Restaurants:")
for restaurant in restaurants:
    print(f"\n{restaurant['name']}")
    print(f"  Location: {restaurant['location']}")
    print(f"  Hours: {restaurant['hours']}")
    print(f"  Payment: {', '.join(restaurant['payment_methods'])}")
EOF
```

#### **Via API**

```bash
# Query events
curl -X POST http://localhost:8081/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "What events are happening today?"}'

# Query restaurants
curl -X POST http://localhost:8081/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Where can I eat on campus?"}'
```

---

### **Component 7: System Health Monitoring**

Monitor system health and performance.

#### **Check System Status**

```bash
curl http://localhost:8081/system/status | python -m json.tool
```

**Response includes:**
- RAG system status
- Image count
- Gemini API connectivity
- Configuration status
- Timestamp

#### **Check Image Processing Status**

```bash
curl http://localhost:8081/images/status | python -m json.tool
```

**Response includes:**
- Total images processed
- Cache availability
- Last update timestamp
- Auto-monitoring status

#### **Run Health Check Script**

```bash
python << 'EOF'
import requests

def check_health():
    endpoints = [
        ('System Status', 'http://localhost:8081/system/status'),
        ('Image Status', 'http://localhost:8081/images/status'),
        ('Room List', 'http://localhost:8081/api/navigation/rooms')
    ]

    for name, url in endpoints:
        try:
            response = requests.get(url, timeout=5)
            status = 'âœ…' if response.status_code == 200 else 'âŒ'
            print(f"{status} {name}: {response.status_code}")
        except Exception as e:
            print(f"âŒ {name}: {str(e)}")

check_health()
EOF
```

---

### **Updating Image Embeddings**
```bash
# Run the embedding update script
python update_embeddings.py

# Or using uv
uv run python update_embeddings.py
```

The `update_embeddings.py` script provides comprehensive testing and management of the embedding system:

#### **What the Script Does:**
- **Tests all embedding update methods** (direct, HTTP endpoints, cache management)
- **Validates system functionality** and reports detailed status
- **Processes all images** in the `images/` folder and generates embeddings
- **Provides usage examples** for different embedding update approaches

#### **Script Output:**
```
ğŸš€ SCRIPT DE ATUALIZAÃ‡ÃƒO DE EMBEDDINGS
==================================================
ğŸ“¦ Importando sistema...
âœ… Sistema RAG multimodal disponÃ­vel
ğŸ”„ Inicializando modelos RAG...
âœ… Modelos de embedding carregados

ğŸ“Š STATUS INICIAL:
- Initialized: True
- Total Images: 3
- RAG Available: True

ğŸ”„ MÃ‰TODO 1: AtualizaÃ§Ã£o Direta
âœ… AtualizaÃ§Ã£o direta bem-sucedida

ğŸ”„ MÃ‰TODO 2: AtualizaÃ§Ã£o via Endpoint
âœ… Endpoint de atualizaÃ§Ã£o funcionando

ğŸ”„ MÃ‰TODO 3: Limpeza de Cache
âœ… Cache limpo com sucesso

ğŸ‰ SCRIPT EXECUTADO COM SUCESSO!
âœ… Todos os mÃ©todos de atualizaÃ§Ã£o funcionando
```

#### **When to Use:**
- **Initial setup**: After adding new images to the `images/` folder
- **System validation**: To verify embedding system is working correctly
- **Troubleshooting**: When experiencing issues with image processing
- **Cache management**: To clear and regenerate embeddings

## ğŸ’» Usage Examples

### **Basic Navigation Queries**
```
User: "How do I get to room 1033 from the main entrance?"
AI: "To reach Room 1033 (Main Office) from the South Entrance:
     1. Enter through the south doors
     2. Walk straight north, down the main hallway
     3. Continue past all the classrooms and labs
     4. The Main Office (1033) will be on your right in the north-east corner"
```

### **Complex Queries with Visual Context**
```
User: "What's the best way to get to the elevator from room 1015?"
AI: "Based on the building layout, here's how to reach the elevator from Room 1015:
     1. Exit Room 1015 (west side of main hall)
     2. Turn right and walk north toward the stairs
     3. The elevator is located just south of the stairs, on your right
     4. Total walking distance: approximately 50 meters"
```

### **Room Information Queries**
```
User: "What rooms are available on this floor?"
AI: "The M1 Blue Building main floor includes:
     â€¢ Classrooms: 1003, 1004, 1006, 1013-1016
     â€¢ Computer Labs: 1020, 1022, 1024, 1026
     â€¢ Main Office: 1033
     â€¢ Facilities: Elevator, Stairs, Washrooms
     â€¢ Connected to Building H via hallway"
```

## ï¿½ Modular Architecture

### **Config Module** (`src/config/`)
Manages environment configuration and system settings:
- **environment.py**: Handles environment variables and configuration loading
- **settings.py**: RAG system configuration and model parameters

### **Models Module** (`src/models/`)
Wraps AI model interfaces:
- **embedding_models.py**: Sentence Transformer and embedding generation
- **gemini_models.py**: Google Gemini API integration

### **Services Module** (`src/services/`)
Implements business logic and services:
- **initialization_service.py**: Model initialization and setup
- **validation_service.py**: Input/output validation

### **Utils Module** (`src/utils/`)
Provides utility functions and validators:
- **validators.py**: Data validation and sanitization

## ï¿½ğŸ”§ API Endpoints

### **Chat Interface**
- **POST** `/chat` - Send messages to the AI navigator
- **GET** `/` - Main chat interface

### **System Status**
- **GET** `/system/status` - Complete system status
- **GET** `/images/status` - Image processing status

### **Image Management**
- **POST** `/images/update` - Update image embeddings
- **POST** `/images/clear-cache` - Clear embedding cache
- **POST** `/images/auto-monitor/start` - Start auto-monitoring
- **POST** `/images/auto-monitor/stop` - Stop auto-monitoring
- **GET** `/images/auto-monitor/status` - Monitor status

## ğŸ—ï¸ Project Structure

```
Capstone_Project_AIM/
â”œâ”€â”€ ğŸ“ src/                          # Modular source code
â”‚   â”œâ”€â”€ ğŸ“ config/
â”‚   â”‚   â”œâ”€â”€ __init__.py              # Configuration initialization
â”‚   â”‚   â”œâ”€â”€ environment.py           # Environment variables management
â”‚   â”‚   â””â”€â”€ settings.py              # RAG system settings
â”‚   â”œâ”€â”€ ğŸ“ models/
â”‚   â”‚   â”œâ”€â”€ __init__.py              # Models initialization
â”‚   â”‚   â”œâ”€â”€ embedding_models.py      # Embedding model wrapper
â”‚   â”‚   â””â”€â”€ gemini_models.py         # Gemini model manager
â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”œâ”€â”€ __init__.py              # Services initialization
â”‚   â”‚   â”œâ”€â”€ initialization_service.py # Model initialization logic
â”‚   â”‚   â””â”€â”€ validation_service.py    # Data validation services
â”‚   â””â”€â”€ ğŸ“ utils/
â”‚       â”œâ”€â”€ __init__.py              # Utils initialization
â”‚       â””â”€â”€ validators.py            # Utility validators
â”œâ”€â”€ ğŸ“ templates/                    # HTML templates
â”‚   â””â”€â”€ index.html                   # Main chat interface
â”œâ”€â”€ ğŸ“ static/                       # Static web assets
â”‚   â”œâ”€â”€ style.css                    # Application styling
â”‚   â””â”€â”€ script.js                    # Frontend JavaScript
â”œâ”€â”€ ğŸ“ images/                       # Building floor plans and images
â”‚   â”œâ”€â”€ M1.jpeg                      # Main floor plan
â”‚   â”œâ”€â”€ M2.jpeg                      # Additional views
â”‚   â””â”€â”€ M3.jpeg                      # Detailed sections
â”œâ”€â”€ ğŸ“ tests/                        # Comprehensive test suite
â”‚   â”œâ”€â”€ ğŸ“ unit/                     # Unit tests
â”‚   â”‚   â”œâ”€â”€ test_configuration.py    # Configuration tests
â”‚   â”‚   â””â”€â”€ test_models.py           # Model tests
â”‚   â”œâ”€â”€ ğŸ“ integration/              # Integration tests
â”‚   â”‚   â”œâ”€â”€ test_complete_system.py  # Full system integration
â”‚   â”‚   â”œâ”€â”€ test_embedding_evidence.py
â”‚   â”‚   â””â”€â”€ test_integrated_system.py
â”‚   â”œâ”€â”€ ğŸ“ system/                   # System-level tests
â”‚   â”‚   â”œâ”€â”€ test_auto_update.py      # Auto-update functionality
â”‚   â”‚   â”œâ”€â”€ test_final_system.py     # End-to-end tests
â”‚   â”‚   â””â”€â”€ test_real_gemini.py      # Real Gemini API tests
â”‚   â”œâ”€â”€ ğŸ“ performance/              # Performance tests
â”‚   â”‚   â”œâ”€â”€ test_gemini_real_vs_mock.py
â”‚   â”‚   â””â”€â”€ test_models_simulation.py
â”‚   â”œâ”€â”€ conftest.py                  # Pytest configuration
â”‚   â””â”€â”€ test_runner.py               # Test execution script
â”œâ”€â”€ ğŸ“ scripts/                      # Utility scripts
â”‚   â”œâ”€â”€ run_tests.py                 # Run all tests
â”‚   â””â”€â”€ setup_environment.py         # Environment setup
â”œâ”€â”€ ğŸ“ config/                       # Configuration files
â”‚   â””â”€â”€ pytest.ini                   # Pytest settings
â”œâ”€â”€ main.py                          # Main Flask application
â”œâ”€â”€ multimodal_rag_complete.py       # RAG system implementation
â”œâ”€â”€ demo_auto_update.py              # Auto-update demonstration
â”œâ”€â”€ update_embeddings.py             # Embedding update and testing script
â”œâ”€â”€ requirements.txt                 # Python dependencies
â”œâ”€â”€ pyproject.toml                   # Project configuration
â”œâ”€â”€ devserver.sh                     # Development server script
â””â”€â”€ README.md                        # This file
```

## ğŸ” System Components

### **1. Flask Web Application (`main.py`)**
- **Chat Interface**: Handles user interactions
- **Image Management**: Processes and manages building images
- **Auto-Monitoring**: Watches for new images and updates embeddings
- **API Endpoints**: RESTful API for system control

### **2. RAG System (`multimodal_rag_complete.py`)**
- **Multimodal Processing**: Handles both text and image inputs
- **Embedding Generation**: Creates vector representations
- **Similarity Search**: Finds relevant information
- **Contextual Analysis**: Combines multiple data sources

### **3. AI Models Integration**
- **Gemini Models**: Text and multimodal understanding
- **Embedding Models**: Vector generation for search
- **Vertex AI**: Cloud-based AI services

### **4. Embedding Management (`update_embeddings.py`)**
- **Comprehensive Testing**: Validates all embedding update methods
- **System Validation**: Checks RAG system functionality and status
- **Cache Management**: Handles embedding cache operations
- **Usage Examples**: Provides documentation for different update approaches
- **Error Handling**: Robust error reporting and troubleshooting

## ğŸ’» Main Application Scripts

### **1. main.py** - Core Flask Application Server

**Purpose**: Main web server orchestrating all system components

**Key Functions**:
```python
# Chat endpoint - handles AI navigation requests
@app.route("/chat", methods=['POST'])
def chat():
    # Parses navigation requests using Gemini
    # Resolves room names via aliases
    # Finds relevant images using RAG
    # Generates AI responses with context
    # Returns: { reply: HTML, mapAction: navigation_data }

# Navigation parsing - extracts start/end from natural language
def parse_navigation_request(user_message: str):
    # Uses Gemini to parse: "go from X to Y"
    # Returns: { is_navigation, start, end, startNode, endNode }

# Room resolution - handles aliases and mappings
def resolve_room_name(room_name: str):
    # Normalizes input: "1003" â†’ "Room_1003"
    # Checks aliases: "bathroom men" â†’ "Bathroom-Men"
    # Returns official room ID

# API: Navigation from map clicks
@app.route("/api/navigation/from-clicks", methods=['POST'])
def api_navigation_from_clicks():
    # Receives: { startRoom, endRoom }
    # Generates walking directions
    # Returns: { reply, path }

# API: Room center configuration
@app.route("/api/navigation/room-centers", methods=['GET'])
def api_get_room_centers():
    # Returns manual room center overrides
    # Used by map controller for precise positioning
```

**Image Management System**:
- `AdvancedImageManager`: Handles image processing and embeddings
- `AutoImageUpdater`: Monitors file system for new images
- File watcher with 5-second debounce to avoid duplicate processing

**Configuration Loading**:
- `building_m_rooms.json`: Room mappings, aliases, centers
- Environment variables: API keys, project settings
- RAG system initialization with model managers

---

### **2. map-controller.js** - Frontend Map & Navigation Logic

**Purpose**: Manages Leaflet map, SVG overlays, and pathfinding

**Core Components**:

#### **Coordinate Transformation**
```javascript
// Converts SVG pixel coordinates to geographic lat/lng
function svgCoordsToLatLng(svgX, svgY, svgMap, corners) {
    // 1. Normalize to 0-1 range within SVG viewBox
    // 2. Bilinear interpolation across rotated corners
    // 3. Account for 21.3Â° building rotation
    // Returns: L.latLng(lat, lng)
}

// Gets room visual center with priority system
function getRoomCenterFromSVG(roomId, svgMap, corners) {
    // Priority 1: Check manual override from config
    // Priority 2: Calculate from room polygon getBBox()
    // Priority 3: Fallback to corridor node
    // Returns: LatLng coordinates for marker placement
}
```

#### **Navigation Graph & Pathfinding**
```javascript
// Builds graph from SVG nodes and JSON definition
function buildNavigationGraph(svgMap, graphDefinition, corners) {
    // Extracts node positions from SVG by ID
    // Builds adjacency list with distances
    // Creates metadata (room representations)
    // Returns: { graph, nodePositions, nodeMetadata }
}

// Dijkstra's algorithm for shortest path
function findShortestPath(graph, startNode, endNode) {
    // Standard Dijkstra implementation
    // Uses node distances (real-world meters)
    // Returns: Array of node IDs forming path
}

// Visual path rendering
function drawPathOnMap(path, nodePositions, svgMap) {
    // Highlights start node (green)
    // Highlights end node (red)
    // Highlights intermediate nodes (yellow)
    // Updates SVG circle styles for visibility
}
```

#### **Room Click Handlers**
```javascript
function handleRoomClick(roomId, graphData, svgMap) {
    // Mode: selecting_start
    //   â†’ Place green marker at room center
    //   â†’ Store start coordinates
    //   â†’ Switch to selecting_end mode
    
    // Mode: selecting_end
    //   â†’ Place red marker at room center
    //   â†’ Calculate shortest path
    //   â†’ Render path on map
    //   â†’ Send navigation request to chat
}
```

#### **Map Initialization Sequence**
1. Create Leaflet map with rotation support (21.3Â°)
2. Load campus GeoJSON to find Building M bounds
3. Calculate rotated corners for overlay
4. Load SVG floor plan (M1_official.svg)
5. Load manual room centers from API
6. Build navigation graph from node definitions
7. Setup click handlers for all rooms and exits

---

### **3. multimodal_rag_complete.py** - RAG System Implementation

**Purpose**: Multimodal retrieval-augmented generation for image-text search

**Key Functions**:

#### **Image Processing**
```python
def processar_imagens_da_pasta(pasta_imagens, embedding_size=512):
    # For each image in folder:
    #   1. Generate description using Gemini vision
    #   2. Create image embedding (multimodal model)
    #   3. Create text embedding from description
    #   4. Store in pandas DataFrame with metadata
    # Returns: DataFrame with all embeddings and descriptions
```

#### **Similarity Search**
```python
def buscar_imagens_similares_com_embedding(
    user_embedding, 
    image_metadata_df, 
    top_n=3,
    column_name="text_embedding_from_image_description"
):
    # Calculates cosine similarity between:
    #   - User query embedding
    #   - Each image's embedding
    # Returns: Top N most relevant images with scores
```

#### **Embedding Generation**
```python
def get_text_embedding_from_text_embedding_model(text: str):
    # Uses Google's text embedding model
    # Returns: 512-dimensional vector

def get_image_embedding_from_multimodal_embedding_model(image_path):
    # Uses Google's multimodal embedding model
    # Returns: 512-dimensional vector
```

#### **Gemini Response**
```python
def get_gemini_response(user_message, relevant_images):
    # Constructs prompt with:
    #   - User query
    #   - Relevant image descriptions
    #   - Building context (map_info)
    # Sends to Gemini 2.0 Flash
    # Returns: Markdown-formatted response
```

---

### **4. floorPlansScript.js** - Building Data Configuration

**Purpose**: Defines building structure, rooms, and navigation graph

**Structure**:
```javascript
const floorPlans = {
  "Building M": {
    "floors": {
      "floor1": {
        "navigationGraph": {
          // Node definitions with connections
          "M1_6": {
            "connections": ["M1_5", "M1_7"],
            "represents": { 
              type: "room", 
              id: "Room_1003" 
            }
          },
          // ... more nodes
        },
        
        "objects": {
          "rooms": {
            "Room_1003": ["Door_1003_1"],
            // Room IDs map to door element IDs in SVG
          },
          "exits": {
            "Outside-Exit_1": []
          }
        }
      }
    }
  }
}
```

**Navigation Graph Logic**:
- **Nodes**: Represent corridor positions, room entrances, intersections
- **Connections**: Define walkable paths between nodes
- **Represents**: Links nodes to rooms, stairs, elevators, exits
- **Distance Calculation**: Uses Euclidean distance between node coordinates

---

### **5. building_m_rooms.json** - Configuration Data

**Purpose**: Room mappings, aliases, and manual coordinate overrides

**Structure**:
```json
{
  "Building M": {
    "aliases": {
      "1003": "Room_1003",
      "bathroom men": "Bathroom-Men"
    },
    
    "roomToNode": {
      "Room_1003": "M1_6",
      "Room_1018": "M1_8"
    },
    
    "roomCentersSVG": {
      "_comment": "Manual overrides in SVG coordinates",
      "Room_1003": { "x": 250.5, "y": 600.3 },
      "Room_1004": {}  // Empty = auto-calculate
    },
    
    "roomDescriptions": {
      "Room_1003": "Room 1003 - Computer Lab"
    }
  }
}
```

**Usage Flow**:
1. User types: "go to 1003"
2. System checks `aliases`: "1003" â†’ "Room_1003"
3. System checks `roomToNode`: "Room_1003" â†’ "M1_6"
4. System checks `roomCentersSVG`: Gets precise center or calculates
5. System uses node "M1_6" for pathfinding, center for marker

---

### **6. update_embeddings.py** - Embedding Management & Testing

**Purpose**: Comprehensive testing and updating of image embeddings

**Functionality**:
```python
# Tests three update methods:

# Method 1: Direct API call
image_manager.update_embeddings(force_reprocess=True)

# Method 2: HTTP endpoint
requests.post('http://localhost:8081/images/update')

# Method 3: Cache management
image_manager.clear_cache()
image_manager.initialize()

# Provides detailed status reporting:
# - Number of images processed
# - Embedding generation success
# - Cache status
# - RAG system availability
```

**When to Run**:
- After adding new images to `images/` folder
- When experiencing image processing issues
- For system validation and troubleshooting
- To regenerate embeddings with new models

---

## ğŸ”„ Complete Navigation Flow

### **Scenario: User asks "Navigate from Room 1003 to Room 1018"**

```
1. USER INPUT (Chat)
   â”œâ”€â–º User types: "Navigate from Room 1003 to Room 1018"
   â””â”€â–º Submitted via fetch('/chat', { message })

2. BACKEND PARSING (main.py - chat())
   â”œâ”€â–º parse_navigation_request(message)
   â”‚   â”œâ”€â–º Gemini extracts: start="1003", end="1018"
   â”‚   â”œâ”€â–º resolve_room_name("1003") â†’ "Room_1003"
   â”‚   â”œâ”€â–º resolve_room_name("1018") â†’ "Room_1018"
   â”‚   â””â”€â–º roomToNode mapping: Room_1003â†’M1_6, Room_1018â†’M1_8
   â”‚
   â”œâ”€â–º image_manager.find_relevant_images(message)
   â”‚   â”œâ”€â–º Generate embedding from query
   â”‚   â”œâ”€â–º Search similar images (cosine similarity)
   â”‚   â””â”€â–º Return top 2 relevant floor plan images
   â”‚
   â””â”€â–º model.generate_content(prompt + image_context)
       â””â”€â–º Gemini generates walking directions

3. RESPONSE TO FRONTEND
   â””â”€â–º JSON: {
       reply: "Turn right from Room 1003...",
       mapAction: {
         type: "SHOW_ROUTE",
         startNode: "M1_6",
         endNode: "M1_8",
         startRoom: "Room_1003",
         endRoom: "Room_1018"
       }
     }

4. FRONTEND MAP RENDERING (map-controller.js)
   â”œâ”€â–º showRouteBuildingM(M1_6, M1_8)
   â”‚   â”œâ”€â–º findShortestPath(graph, M1_6, M1_8)
   â”‚   â”‚   â””â”€â–º Dijkstra: [M1_6, M1_5, M1_4, M1_Int_1, M1_Turn_1, M1_8]
   â”‚   â”‚
   â”‚   â”œâ”€â–º drawPathOnMap(path, nodePositions, svgMap)
   â”‚   â”‚   â”œâ”€â–º Highlight M1_6 (green)
   â”‚   â”‚   â”œâ”€â–º Highlight M1_8 (red)
   â”‚   â”‚   â””â”€â–º Highlight intermediate nodes (yellow)
   â”‚   â”‚
   â”‚   â”œâ”€â–º getRoomCenterFromSVG("Room_1003")
   â”‚   â”‚   â”œâ”€â–º Check manual override in config
   â”‚   â”‚   â””â”€â–º Or calculate from room polygon
   â”‚   â”‚
   â”‚   â”œâ”€â–º Place green marker at Room_1003 center
   â”‚   â”œâ”€â–º Place red marker at Room_1018 center
   â”‚   â””â”€â–º map.fitBounds([startCoords, endCoords])
   â”‚
   â””â”€â–º Display chat message with walking directions

5. USER SEES
   â”œâ”€â–º Chat: "Turn right from Room 1003, walk 50m..."
   â”œâ”€â–º Map: Visual path highlighted on floor plan
   â”œâ”€â–º Markers: Green (start) and Red (end) at room centers
   â””â”€â–º Animation: Map auto-zooms to show full route
```

---

## ğŸ§ª Testing

### **Run All Tests**
```bash
python -m pytest tests/ -v
```

### **Run Specific Test Categories**
```bash
# Unit tests
python -m pytest tests/unit/ -v

# Integration tests
python -m pytest tests/integration/ -v

# System tests
python -m pytest tests/system/ -v
```

### **Performance Tests**
```bash
python tests/performance/test_models_simulation.py
```

## ğŸ› Troubleshooting Guide

This comprehensive troubleshooting section helps you resolve common issues.

---

### **Issue 1: Gemini API Key Not Working**

**Symptoms:**
- Error: `API key not found`
- Error: `google.api_core.exceptions.PermissionDenied: 403`
- Chatbot not responding

**Solutions:**

#### **Step 1: Verify API Key is Set**
```bash
# Check environment variable
echo $GEMINI_API_KEY

# Check .env file
cat .env | grep GEMINI_API_KEY
```

#### **Step 2: Validate API Key Format**
```bash
# Gemini API keys should start with 'AIza'
# Example: AIzaSyBHNDh4x8KDtw_O9HtHTtaZXeZV2Ihq9MA

# Test API key
python << 'EOF'
import os
import google.generativeai as genai
from dotenv import load_dotenv

load_dotenv()
api_key = os.getenv('GEMINI_API_KEY')

if not api_key:
    print("âŒ API key not found in environment")
elif not api_key.startswith('AIza'):
    print("âŒ Invalid API key format")
else:
    try:
        genai.configure(api_key=api_key)
        model = genai.GenerativeModel('gemini-2.5-pro')
        response = model.generate_content("Say hello")
        print("âœ… API key is valid!")
        print(f"Response: {response.text}")
    except Exception as e:
        print(f"âŒ API key test failed: {e}")
EOF
```

#### **Step 3: Regenerate API Key**
1. Visit [Google AI Studio](https://aistudio.google.com/apikey)
2. Create a new API key
3. Update `.env` file with the new key
4. Restart the application

---

### **Issue 2: Google Cloud Authentication Errors**

**Symptoms:**
- Error: `Could not automatically determine credentials`
- Error: `Application Default Credentials are not available`
- RAG system not initializing

**Solutions:**

#### **Step 1: Install Google Cloud SDK**
```bash
# Check if gcloud is installed
which gcloud

# If not installed, download from:
# https://cloud.google.com/sdk/docs/install
```

#### **Step 2: Authenticate**
```bash
# Login to Google Cloud
gcloud auth application-default login

# Set your project ID
gcloud config set project YOUR_PROJECT_ID

# Verify authentication
gcloud auth application-default print-access-token
```

#### **Step 3: Enable Required APIs**
```bash
# Enable Vertex AI API
gcloud services enable aiplatform.googleapis.com

# Enable Generative Language API
gcloud services enable generativelanguage.googleapis.com

# Verify enabled services
gcloud services list --enabled | grep -E "aiplatform|generativelanguage"
```

#### **Step 4: Create Service Account (Alternative)**
```bash
# Create service account
gcloud iam service-accounts create fanshawe-navigator \
  --display-name="Fanshawe Navigator Service Account"

# Grant necessary roles
gcloud projects add-iam-policy-binding YOUR_PROJECT_ID \
  --member="serviceAccount:fanshawe-navigator@YOUR_PROJECT_ID.iam.gserviceaccount.com" \
  --role="roles/aiplatform.user"

# Create and download key
gcloud iam service-accounts keys create credentials.json \
  --iam-account=fanshawe-navigator@YOUR_PROJECT_ID.iam.gserviceaccount.com

# Update .env
echo "GOOGLE_APPLICATION_CREDENTIALS=./credentials.json" >> .env
```

---

### **Issue 3: Image Processing Failures**

**Symptoms:**
- Error: `No images found in images/`
- Error: `Failed to generate embeddings`
- RAG system returns empty results

**Solutions:**

#### **Step 1: Verify Images Exist**
```bash
# Check images directory
ls -la images/

# Expected output should show .jpeg or .png files:
# M1.jpeg
# M2.jpeg
# M3.jpeg
```

#### **Step 2: Verify Image Format**
```bash
# Check image file types
file images/*

# Expected: JPEG image data or PNG image data
```

#### **Step 3: Clear Cache and Reprocess**
```bash
# Delete existing cache
rm -f image_metadata_cache.pkl

# Restart application (will regenerate embeddings)
python main.py
```

#### **Step 4: Manual Embedding Update**
```bash
# Run update script
python update_embeddings.py

# Check for errors in output
# Expected: "âœ… Script executed successfully"
```

#### **Step 5: Test Image Processing**
```bash
python << 'EOF'
from PIL import Image
import os

images_dir = 'images'
for filename in os.listdir(images_dir):
    if filename.endswith(('.jpg', '.jpeg', '.png')):
        filepath = os.path.join(images_dir, filename)
        try:
            img = Image.open(filepath)
            print(f"âœ… {filename}: {img.size} {img.mode}")
        except Exception as e:
            print(f"âŒ {filename}: {e}")
EOF
```

---

### **Issue 4: Port Already in Use**

**Symptoms:**
- Error: `Address already in use`
- Error: `[Errno 98] Address already in use`
- Application won't start

**Solutions:**

#### **Step 1: Find Process Using Port**
```bash
# Linux/Mac
lsof -i :8081

# Windows
netstat -ano | findstr :8081
```

#### **Step 2: Kill the Process**
```bash
# Linux/Mac
kill -9 <PID>

# Windows
taskkill /PID <PID> /F
```

#### **Step 3: Change Port (Alternative)**
```bash
# Option 1: Update .env file
echo "PORT=8082" >> .env

# Option 2: Run with different port
python main.py --port 8082

# Option 3: Modify main.py temporarily
# Change: app.run(debug=True, host='0.0.0.0', port=8081)
# To:     app.run(debug=True, host='0.0.0.0', port=8082)
```

---

### **Issue 5: D2L Scraper Failures**

**Symptoms:**
- Error: `Playwright executable doesn't exist`
- Error: `Login failed`
- 2FA timeout

**Solutions:**

#### **Step 1: Install Playwright Browsers**
```bash
# Install Firefox (used by scraper)
python -m playwright install firefox

# Verify installation
python -m playwright install --help
```

#### **Step 2: Verify D2L Credentials**
```bash
# Check credentials in .env
cat .env | grep D2L

# Should show:
# D2L_USERNAME=your_email@fanshaweonline.ca
# D2L_PASSWORD=your_password
```

#### **Step 3: Test Login Manually**
```bash
# Run scraper in visible mode (not headless)
python extract_all_announcements.py

# Watch browser window for errors
# Enter 2FA code when prompted
```

#### **Step 4: Increase Timeouts**

Edit `src/services/d2l_scraper.py`:
```python
# Find this line:
await page.wait_for_selector('input[type="email"]', timeout=5000)

# Change to:
await page.wait_for_selector('input[type="email"]', timeout=30000)
```

---

### **Issue 6: Map Not Displaying**

**Symptoms:**
- Blank map area
- Error: `Cannot read property 'map' of undefined`
- Floor plan not loading

**Solutions:**

#### **Step 1: Check Browser Console**
```
1. Open browser DevTools (F12)
2. Go to Console tab
3. Look for JavaScript errors
```

#### **Step 2: Verify Files Exist**
```bash
# Check map files
ls -la LeafletJS/Floorplans/Building\ M/

# Expected files:
# M1_official.svg
# building_m_floor1_navigation.json
```

#### **Step 3: Check Network Requests**
```
1. Open DevTools â†’ Network tab
2. Refresh page
3. Look for failed requests (red)
4. Common failures:
   - 404: File not found
   - CORS errors: Server configuration issue
```

#### **Step 4: Clear Browser Cache**
```
1. Ctrl+Shift+Delete (or Cmd+Shift+Delete on Mac)
2. Select "Cached images and files"
3. Clear data
4. Refresh page (Ctrl+F5 or Cmd+Shift+R)
```

---

### **Issue 7: Navigation Not Working**

**Symptoms:**
- Clicking rooms does nothing
- No route displayed
- Error: `Graph not initialized`

**Solutions:**

#### **Step 1: Verify Configuration**
```bash
# Check room configuration file
cat config/building_m_rooms.json | python -m json.tool

# Should contain:
# - "aliases"
# - "roomToNode"
# - "roomCentersSVG"
```

#### **Step 2: Test Room Resolution**
```bash
python << 'EOF'
import json

with open('config/building_m_rooms.json', 'r') as f:
    config = json.load(f)

# Test alias lookup
test_aliases = ['1003', '1018', 'bathroom men']
for alias in test_aliases:
    result = config['Building M']['aliases'].get(alias)
    print(f"{alias} â†’ {result}")

# Test node mapping
test_rooms = ['Room_1003', 'Room_1018']
for room in test_rooms:
    node = config['Building M']['roomToNode'].get(room)
    print(f"{room} â†’ {node}")
EOF
```

#### **Step 3: Check Browser Console for Graph Errors**
```javascript
// Open DevTools Console and run:
console.log('Graph Data:', currentGraphData);
console.log('Navigation State:', navigationState);

// Expected output should show:
// - graph: { M1_1: {...}, M1_2: {...}, ... }
// - nodePositions: { M1_1: LatLng(...), ... }
```

---

### **Issue 8: Slow Response Times**

**Symptoms:**
- Chat responses take > 10 seconds
- Navigation requests timeout
- High CPU usage

**Solutions:**

#### **Step 1: Check System Resources**
```bash
# Monitor CPU and memory
top  # Linux/Mac
# or
htop  # if installed

# Look for python processes using high CPU
```

#### **Step 2: Reduce Image Count**
```bash
# Move some images out of images/ folder temporarily
mkdir images_backup
mv images/M2.jpeg images_backup/
mv images/M3.jpeg images_backup/

# Regenerate embeddings with fewer images
python update_embeddings.py
```

#### **Step 3: Enable Caching**
```bash
# Verify cache exists
ls -lh image_metadata_cache.pkl

# If file is very small or missing, regenerate:
rm -f image_metadata_cache.pkl
python update_embeddings.py
```

#### **Step 4: Use Faster Model**

Edit `main.py` to use faster model:
```python
# Find this line:
model = genai.GenerativeModel('gemini-2.5-pro')

# Change to:
model = genai.GenerativeModel('gemini-2.0-flash')  # Faster
```

---

### **Issue 9: Database/JSON Errors**

**Symptoms:**
- Error: `No such file or directory: 'data/campus_events.json'`
- Error: `JSONDecodeError`
- Events/restaurants not loading

**Solutions:**

#### **Step 1: Verify JSON Files Exist**
```bash
# Check data directory
ls -la data/

# Expected files:
# campus_events.json
# campus_restaurants.json
# d2l_announcements.json
```

#### **Step 2: Validate JSON Syntax**
```bash
# Test each JSON file
python -m json.tool data/campus_events.json > /dev/null && echo "âœ… campus_events.json valid"
python -m json.tool data/campus_restaurants.json > /dev/null && echo "âœ… campus_restaurants.json valid"
python -m json.tool data/d2l_announcements.json > /dev/null && echo "âœ… d2l_announcements.json valid"
```

#### **Step 3: Fix JSON Syntax Errors**
```bash
# Use online JSON validator
# Copy file contents to: https://jsonlint.com/

# Common issues:
# - Missing commas
# - Trailing commas
# - Unescaped quotes
# - Missing brackets
```

---

### **Issue 10: Dependencies Not Installing**

**Symptoms:**
- Error: `No module named 'google.generativeai'`
- Error: `ImportError: cannot import name...`
- `pip install` failures

**Solutions:**

#### **Step 1: Upgrade pip**
```bash
python -m pip install --upgrade pip
```

#### **Step 2: Reinstall Dependencies**
```bash
# Remove existing installations
pip uninstall -y -r requirements.txt

# Clean install
pip install -r requirements.txt
```

#### **Step 3: Check Python Version**
```bash
python --version
# Should be 3.11 or higher

# If lower, install Python 3.11+
# https://www.python.org/downloads/
```

#### **Step 4: Create Fresh Virtual Environment**
```bash
# Deactivate current environment
deactivate

# Remove old environment
rm -rf .venv

# Create new environment
python3.11 -m venv .venv

# Activate
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt
```

---

### **General Debugging Tips**

#### **Enable Verbose Logging**
```python
# Add to main.py at the top:
import logging
logging.basicConfig(level=logging.DEBUG)
```

#### **Test Individual Components**
Use the component testing sections above to isolate issues.

#### **Check System Status Endpoint**
```bash
curl http://localhost:8081/system/status | python -m json.tool
```

#### **Review Application Logs**
```bash
# Run with output redirection
python main.py 2>&1 | tee application.log

# Search logs for errors
grep -i error application.log
grep -i exception application.log
```

#### **Test with Minimal Configuration**
```bash
# Create minimal .env file
cat > .env.minimal << 'EOF'
GEMINI_API_KEY=your_key_here
FLASK_ENV=development
FLASK_DEBUG=1
EOF

# Test with minimal config
cp .env .env.backup
cp .env.minimal .env
python main.py
```

---

### **Getting Help**

If you're still experiencing issues:

1. **Check Documentation**: Review [README.md](README.md:1), [QUICK_START_ANNOUNCEMENTS.md](QUICK_START_ANNOUNCEMENTS.md), and other docs
2. **Review Error Messages**: Copy the full error traceback
3. **Check GitHub Issues**: [Project Repository Issues](https://github.com/BlueDoze/Capstone_Project_AIM/issues)
4. **Contact Support**: Email support with:
   - Python version (`python --version`)
   - OS information (`uname -a` or `systeminfo`)
   - Full error message
   - Steps to reproduce

---

### **Debug Mode**
```bash
# Run with debug output
FLASK_DEBUG=1 python main.py

# Or set in .env
echo "FLASK_DEBUG=1" >> .env
python main.py
```

## ğŸ“Š Performance Metrics

### **Response Times**
- **Simple Queries**: < 2 seconds
- **Complex Navigation**: < 5 seconds
- **Image Processing**: < 10 seconds per image

### **System Capacity**
- **Concurrent Users**: 50+
- **Image Storage**: Unlimited (limited by disk space)
- **Cache Size**: ~1MB per 100 images

## ğŸ”’ Security Considerations

- **API Keys**: Stored in environment variables, never in code
- **Input Validation**: All user inputs are sanitized
- **Rate Limiting**: Consider implementing for production
- **HTTPS**: Use SSL/TLS in production environments

## ğŸ¤ Contributing

1. **Fork the repository**
2. **Create a feature branch**: `git checkout -b feature/amazing-feature`
3. **Commit changes**: `git commit -m 'Add amazing feature'`
4. **Push to branch**: `git push origin feature/amazing-feature`
5. **Open a Pull Request**

## ğŸ“ License

This project is developed for educational purposes as part of the Fanshawe College Capstone Project.

## ğŸ™ Acknowledgments

- **Google AI**: For Gemini models and Vertex AI platform
- **Fanshawe College**: For providing the project requirements
- **Open Source Community**: For the amazing tools and libraries

---

## ï¿½ Quick Reference

### **File Locations Summary**

| Component | File Path | Purpose |
|-----------|-----------|---------|
| **Main Server** | `main.py` | Flask application entry point |
| **Map Controller** | `static/map-controller.js` | Frontend navigation logic |
| **Chat Interface** | `static/script.js` | Chat UI interaction |
| **RAG System** | `multimodal_rag_complete.py` | Image-text search engine |
| **Floor Plans** | `LeafletJS/Floorplans/Building M/` | SVG maps and navigation data |
| **Configuration** | `config/building_m_rooms.json` | Room mappings and centers |
| **Navigation Graph** | `LeafletJS/floorPlansScript.js` | Building structure definition |
| **Room Center Tool** | `tools/find_room_centers.html` | Visual coordinate finder |

### **Key Endpoints**

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Main chat interface |
| `/chat` | POST | Send navigation queries |
| `/api/navigation/parse` | POST | Parse navigation request |
| `/api/navigation/from-clicks` | POST | Map-initiated navigation |
| `/api/navigation/rooms` | GET | List all rooms |
| `/api/navigation/room-centers` | GET | Get manual coordinate overrides |
| `/system/status` | GET | Complete system status |
| `/images/status` | GET | Image processing status |
| `/images/update` | POST | Update embeddings |
| `/tools/find_room_centers.html` | GET | Coordinate finder tool |

### **Configuration Keys**

**Environment Variables (`.env`)**:
```bash
GEMINI_API_KEY=your_api_key                    # Required
GOOGLE_CLOUD_PROJECT_ID=your_project_id        # For RAG system
GOOGLE_APPLICATION_CREDENTIALS=path/to/key.json # For Vertex AI
```

**Room Configuration (`config/building_m_rooms.json`)**:
- `aliases`: User-friendly name mappings
- `roomToNode`: Room to navigation node mapping
- `roomCentersSVG`: Manual coordinate overrides (x, y)
- `roomDescriptions`: Human-readable room names
- `navigationInstructions`: Room-specific guidance

### **Navigation Graph Structure**

Each node in the navigation graph has:
```javascript
{
  "connections": ["node_id1", "node_id2"],  // Adjacent nodes
  "represents": {                            // What this node represents
    "type": "room|intersection|stairs|elevator|entrance",
    "id": "Room_1003",                      // Optional: room ID
    "goesTo": ["M2", "M3"]                  // Optional: for stairs/elevator
  }
}
```

### **Coordinate Systems**

| System | Origin | Range | Usage |
|--------|--------|-------|-------|
| **SVG** | Top-left of SVG | 0 to viewBox dimensions | Internal calculations |
| **Normalized** | Top-left | 0.0 to 1.0 | Coordinate transformation |
| **Geographic** | Earth center | Lat/Lng degrees | Leaflet map display |
| **Rotated** | Building center | Lat/Lng adjusted | Aligned with campus |

### **Debug Console Commands**

Open browser console (F12) and try:
```javascript
// Check navigation state
console.log(navigationState);

// Check graph data
console.log(currentGraphData);

// Check manual room centers
console.log(manualRoomCenters);

// Test coordinate conversion
const testCoords = svgCoordsToLatLng(250, 600, currentSvgMap, currentCorners);
console.log(testCoords);

// Find path manually
const path = findShortestPath(currentGraphData.graph, "M1_6", "M1_8");
console.log(path);
```

---

## ï¿½ğŸ“ Support

For technical support or questions:
- **Email**: [your-email@fanshawe.ca]
- **Project Repository**: https://github.com/BlueDoze/Capstone_Project_AIM
- **Documentation**: 
  - `README.md` - This file (complete system overview)
  - `COORDINATE_FIX_SUMMARY.md` - Coordinate system details
  - `MANUAL_ROOM_CENTERS_GUIDE.md` - Room center configuration
  - `TESTING_GUIDE.md` - Testing procedures
  - `INTEGRATION_SUMMARY.md` - System integration details

---

**Last Updated**: November 15, 2025  
**Version**: 2.0 (Interactive Navigation System)  
**Status**: âœ… Production Ready

---
